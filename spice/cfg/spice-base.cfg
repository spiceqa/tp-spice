
#
# Library & utils spice tests
#
guest_vm = guest
client_vm = client


role-client..Linux:
    rv_file = ~/rv_file.vv
    rv_binary = "/usr/bin/remote-viewer"

role-client..Windows:
    rv_file = C:\rv_file.vv
    rv_binary = "C:\virt-viewer\bin\remote-viewer.exe"

#
# Qemu-kvm options.
#
# Notice
# ------
#   Any variant that influence on qemu-kvm-spice-server should have 'ss_'
#   prefix. 'ss' is an acronym for spice-server.
#

variants:

    - @ss__smartcard__default:
        no req__ss__smartcard__on
        no req__ss__smartcard__no

    - ss__smartcard__no:
        only req__ss__smartcard__no
        smartcard = no

    - ss__smartcard__on:
        only req__ss__smartcard__on
        smartcard = yes
        smartcard_chardev = "spicevmc"
        smartcard_id = "ccid"
        usb_type_usb = piix3-usb-uhci
        usbs = usb


variants:

    - @ss__monitors__default:
        no req__ss__monitors__1
        no req__ss__monitors__2
        no req__ss__monitors__3
        no req__ss__monitors__4

    - ss__monitors__1:
        only req__ss__monitors__1
        qxl_dev_nr = 1

    - ss__monitors__2:
        only req__ss__monitors__2
        qxl_dev_nr = 2

    - ss__monitors__3:
        only req__ss__monitors__3
        qxl_dev_nr = 3

    - ss__monitors__4:
        only req__ss__monitors__4
        qxl_dev_nr = 4


variants:

    - @ss__disable_copy_paste__default:
        no req__ss__disable_copy__paste_yes

    - ss__disable_copy_paste__yes:
        only req__ss__disable_copy_paste__yes
        disable_copy_paste = yes


variants:

    - @ss__password__default:
        no req__ss__password__on
        no req__ss__password__empty

    - ss__password__empty:
        only req__ss__password__empty
        spice_password =

    - ss__password__on:
        only req__ss__password__on
        spice_password = 12456


variants:

    - @ss__ssl__default:
        no req__ss__ssl__bad_port
        no req__ss__ssl__on

    - ss__ssl__bad_port:
        only req__ss__ssl__bad_port
        spice_port = -1

    - ss__ssl__on:
        only req__ss__ssl__on
        spice_ssl = yes
        spice_port = generate
        spice_tls_port = generate
        spice_tls_ciphers = DEFAULT
        spice_gen_x509 = yes
        spice_x509_dir = yes
        spice_x509_prefix = /tmp/spice_x509d
        spice_x509_key_file = server-key.pem
        spice_x509_cacert_file = ca-cert.pem
        spice_x509_cert_file = server-cert.pem
        spice_x509_key_password = testPassPhrase
        spice_x509_cacert_subj = /C=CZ/L=BRNO/O=SPICE/CN=my CA
        spice_x509_server_subj = /C=CZ/L=BRNO/O=SPICE/CN=
        spice_secure_channels = main, inputs
        spice_client_host_subject = yes
        #variants:
        #    - key_password:
        #        spice_x509_secure = yes
        #    - @no_key_password:
        #        spice_x509_secure = no


variants:

    - @ss__img_comp__default:
        no req__ss__img_comp__auto_glz
        no req__ss__img_comp__auto_lz
        no req__ss__img_comp__quic
        no req__ss__img_comp__glz
        no req__ss__img_comp__lz
        no req__ss__img_comp__off
        no req__ss__img_comp__bad

    - ss__img_comp__auto__glz:
        only req__ss__img_comp__auto_glz
        spice_image_compression = auto_glz

    - ss__img_comp__auto_lz:
        only req__ss__img_comp__auto_lz
        spice_image_compression = auto_lz

    - ss__img_comp__quic:
        only req__ss__img_comp__quic
        spice_image_compression = quic

    - ss__img_comp__glz:
        only req__ss__img_comp__glz
        spice_image_compression = glz

    - ss__img_comp__lz:
        only req__ss__img_comp__lz
        spice_image_compression = lz

    - ss__img_comp__off:
        only req__ss__img_comp__off
        spice_image_compression = off

    - ss__img_comp__bad:
        only req__ss__img_comp__bad
        spice_image_compression = bad_value


variants:

    - @ss__jpeg_wan_comp__default:
        no req__ss__jpeg_wan_comp__auto
        no req__ss__jpeg_wan_comp__off
        no req__ss__jpeg_wan_comp__always
        no req__ss__jpeg_wan_comp__bad

    - ss__jpeg_wan_comp__auto:
        only req__ss__jpeg_wan_comp__auto
        spice_jpeg_wan_compression = auto

    - ss__jpeg_wan_comp__off:
        only req__ss__jpeg_wan_comp__off
        spice_jpeg_wan_compression = off

    - ss__jpeg_wan_comp__always:
        only req__ss__jpeg_wan_comp__always
        spice_jpeg_wan_compression = always

    - ss__jpeg_wan_comp__bad:
        only req__ss__jpeg_wan_comp__bad
        spice_jpeg_wan_compression = bad_value


variants:

    - @ss__zlib_wan_comp__default:
        no req__ss__zlib_wan_comp__auto
        no req__ss__zlib_wan_comp__off
        no req__ss__zlib_wan_comp__always
        no req__ss__zlib_wan_comp__bad

    - ss__zlib_wan_comp__auto:
        only req__ss__zlib_wan_comp__auto
        spice_zlib_glz_wan_compression = auto

    - ss__zlib_wan_comp__off:
        only req__ss__zlib_wan_comp__off
        spice_zlib_glz_wan_compression = off

    - ss__zlib_wan_comp__always:
        only req__ss__zlib_wan_comp__always
        spice_zlib_glz_wan_compression = always

    - ss__zlib_wan_comp__bad:
        only req__ss__zlib_wan_comp__bad
        spice_zlib_glz_wan_compression = bad_value


variants:

    - @ss__streaming_video__default:
        no req__ss__streaming_video__all
        no req__ss__streaming_video__filter
        no req__ss__streaming_video__off
        no req__ss__streaming_video__bad

    - ss__streaming_video__all:
        only req__ss__streaming_video__all
        spice_streaming_video = all

    - ss__streaming_video__filter:
        only req__ss__streaming_video__filter
        spice_streaming_video = filter

    - ss__streaming_video__off:
        only req__ss__streaming_video__off
        spice_streaming_video = off

    - ss__streaming_video__bad:
        only req__ss__streaming_video__bad
        spice_streaming_video = bad_value


variants:

    - @ss__playback_comp__default:
        no req__ss__playback_comp__on
        no req__ss__playback_comp__off
        no req__ss__playback_comp__bad

    - ss__playback_comp__on:
        only req__ss__playback_comp__on
        spice_playback_compression = on

    - ss__playback_comp__off:
        only req__ss__playback_comp__off
        spice_playback_compression = off

    - ss__playback_comp__bad:
        only req__ss__playback_comp__bad
        spice_playback_compression = bad_value


variants:

    - @ss__ip_ver__default:
        no req__ss__ip_ver__4
        no req__ss__ip_ver__6
        no req__ss__ip_ver__no
        no req__ss__ip_ver__46

    - ss__ip_ver__4:
        only req__ss__ip_ver__4
        spice_ipv4 = yes
        spice_ipv6 = no

    - ss__ip_ver__6:
        only req__ss__ip_ver__6
        spice_ipv4 = no
        spice_ipv6 = yes

    - ss__ip_ver__no:
        only req__ss__ip_ver__no
        spice_ipv4 = no
        spice_ipv6 = no

    - ss__ip_ver__46:
        only req__ss__ip_ver__46
        spice_ipv4 = yes
        spice_ipv6 = yes


variants:
    - @ss__usb_redir__defualt:
        no ss__usb_redir__on

    - ss__usb_redir__on:
        only req__ss__usb_redir__on
        #create usb redirection option for guest
        usb_redirection = yes
        usb_redirection_devices = 3
        usb_conf_file='shared/deps/ich9-ehci-uhci.cfg'
        #create usb redirection device for client
        usb_redirection_add_device_vm2 = yes
        usb_redirection_device = "/tmp/usb.raw"
        file_tmp_path = "/tmp/"
        file_path = "/media/test/"
        usb_file = "test.file"
        #bs should be bigger than 512
        bs = "4k"
        usb_name = "test"
        file_size = "32M"
        device_size = "64M"
#                variants:
#                    - migration:
#                        usb_migrate = yes
#                        iterations = 1




#
# Tests source files.
#
# Notice
# ------

#   * Name of variant == file name.
#   * Please specify known parameters for test source scripts.
#

# Should persist. Do not remove. Used by Avocado internal logic.
provider = io-github-spiceqa-spice

#variants:
#
#    - @rv_setup:
#        type = rv_setup
#        fedoraurl = 'http://dl.fedoraproject.org/pub/epel/6'
#        test_dir = /mnt/tests/spice/gui-tests
#        guest_script_req = "pyperclip.py"
#        pnputil = 'C:\\Windows\\winsxs\\amd64_microsoft-windows-pnputil_31bf3856ad364e35_6.1.7600.16385_none_5958b438d6388d15\\PnPutil.exe'
#        winqxl = wqxl.zip
#        winvdagent = wvdagent.zip
#        winp7zip = 7z920-x64.msi
#        vioserial = vioserial.zip
#
#    - @fullscreen_setup:
#        type = fullscreen_setup
#
#    - @smartcard_setup:
#        type = smartcard_setup
#
#    - @rv_connect:
#        type = rv_connect
#        full_screen = no
#        spice_info = None
#
#    - @usb_redirection:
#        type = usb_redirection
#
#    - @rv_build_install:
#        type = rv_build_install
#        script = build_install.py
#
#    - @rv_video:
#        type = rv_video
#        video_binary = totem
#        repeat_video = "yes"
#        source_video_file = video_sample_test.ogv
#        destination_video_file_path = /tmp/test.ogv
#
#    - @migration:
#        # spice-server kvm
#        spice_seamless_migration = on
#        type = migration
#        main_vm = vm1
#        migrate_background = yes
#        migration_test_command = help
#        #migration_bg_command = "cd /tmp; nohup tcpdump -q -i any -t ip host localhost"
#        #migration_bg_check_command = pgrep tcpdump
#        #migration_bg_kill_command = pkill tcpdump
#        kill_vm_on_error = yes
#        iterations = 2
#        used_mem = 1024
#        mig_timeout = 300
#        migration_protocol = "tcp"
#        variants:
#            - @default:
#            - with_set_speed:
#                mig_speed = 1G
#                pre_migrate = "mig_set_speed"
#            - with_reboot:
#                iterations = 1
#                type = migration_with_reboot
#
#    - @rv_fullscreen:
#        type = rv_fullscreen
#
#    - @rv_copyandpaste:
#        type = rv_copyandpaste
#        Linux:
#            client_script = "cb.py"
#            guest_script = cb.py
#        Windows:
#            client_script = "cbwin.py"
#            guest_script = "cbwin.py"
#        dst_dir_client = "/tmp/"
#        dst_dir_guest = "/tmp/"
#        interpreter = python
#        dst_dir = /tmp
#        script_params_img_set = --set_image
#        script_params_img_save = -m
#        script_params_writef = -f
#        script_params_createf = -n
#        final_textfile = StringLengthTest.txt
#        final_image = PNGTest.png
#        image_tocopy_name = Image-small.png
#        final_image_bmp = BMPTest.bmp
#        image_tocopy_name_bmp = Image2.bmp
#        image_type = png
#        script_params = --set
#        script_params_clear = --clear
#        text_to_test = Testing_this_text_was_copied
#
#    - @rv_input:
#        type = rv_input
#        guest_script = key_event_form.py
#
#    - @rv_audio:
#        type = rv_audio
#        audio_src = #path to your audio file (recommend generating a square/sine wave)
#        soundcards = hda
#        audio_tgt = "~/tone.wav"
#        audio_rec = "~/rec.wav"
#        # spice-server options
#        qemu_audio_drv = spice
#
#    - @rv_logging:
#        type = rv_logging
#        logtest = qxl
#        qxl_log = /var/log/Xorg.0.log
#        spice_log = /var/log/spice-vdagent.log
#        interpreter = python
#        dst_dir = /tmp
#        guest_script = cb.py
#        script_params = --set
#        text_to_test = Testing_this_text_was_copied
#
#    - @rv_vdagent:
#        type = rv_vdagent
#        vdagent_test = start
#
#    - @rv_smartcard:
#        type = rv_smartcard
#        certdb = None
#        gencerts = None
#
#    - @rv_gui:
#        spice_port=3070
#        clear_interface = no
#        type = rv_gui
#        screenshot_dir=/home/test/Pictures
#        test_script_tgt = /home/test/
#
#    - @rv_disconnect:
#        type = rv_disconnect
#        kill_on_vms = "client_vm"
#
#    - @rv_vmshutdown:
#        type = rv_vmshutdown
#        cmd_cli_shutdown = "shutdown -h now"
#        cmd_qemu_shutdown = "system_powerdown"
#        shutdownfrom = cmd
#        rv_binary = /usr/bin/remote-viewer
#
#    - @rv_clearx:
#        type = rv_clearx
#        kill_vm  = no
#
#    - @client_guest_shutdown:
#        type = client_guest_shutdown
#        shutdown_method = shell
#        kill_vm = yes
#        kill_vm_gracefully = no


#
# Base tests
#
##variants:
##
##    - test_setup:
##        username = root
##        password = 123456
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_setup
##
##    - build_install:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_build_install
##
##    - connect_ssl:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.ssl.key_password.password.dcp_off.1monitor.default_sc
##        only rv.rv_connect
##
##    - connect_quick:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##    #only spice.default_ipv
##        only rv.rv_connect
##
###   - rvsetup:
###       only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
###       only rv.rv_setup
##
##    - connect_password:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.password.dcp_off.1monitor.default_sc
##        only rv.rv_connect
##
##    - connect_negative:
##        only negative_create
##
##    - verify_only:
##        rv_verify = yes
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.password.dcp_off.1monitor.default_sc
##        only rv.rv_connect
##
##    #Note -- this is expected to fail, as previously disconnect was about ending remote-viewer and not actually testing return value after disconnection
##    #     -- it would be a good thing to rework the disconnect test
##    - disconnect:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_disconnect
##
##    #Migration needs a rework, see rv_migrate.py
##    - migrate:
##        kill_on_vms = "client_vm"
##        variants:
##            - no_ssl:
##                only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##                only rv.rv_migrate.default
##            - ssl:
##                only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.ssl.key_password.password.dcp_off.1monitor.default_sc
##                only rv.rv_migrate.default
##            - ssl_reboot:
##                only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.ssl.key_password.password.dcp_off.1monitor.default_sc
##                only rv.rv_migrate.with_reboot
##            #TODO: Video playback will need to be included in rework, video should maybe be a part of rv_session...?
##            - ssl_video:
##                kill_app_name = "totem"
##                kill_on_vms = "guest_vm"
##                iterations = 1
##                only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.ssl.key_password.password.dcp_off.1monitor.default_sc
##                only rv.rv_migrate.default #TODO, not default, probably video
##            #TODO: This included copy and paste as a test for vdagent working after migration, needs fixing
##            - ssl_vdagent:
##                config_test = "positive_client_to_guest"
##                only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.ssl.key_password.password.dcp_off.1monitor.default_sc
##                only rv.rv_migrate.default #TODO, not default, probably agent or something
##
##    - fullscreen:
##        spice_port = 3050
##        full_screen = yes
##        clear_interface = no
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_fullscreen
##
##    - smartcard:
##        spice_port = 3060
##        clear_interface = no
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.smartcard
##        only rv.rv_smartcard
##
##    - logging:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_logging
##
##    - vdagent:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_vdagent
##
##    - copyandpaste:
##        variants:
##            - no_dcp:
##                only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##                only rv.rv_copyandpaste
##            - dcp:
##                only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_on.1monitor.default_sc
##                only rv.rv_copyandpaste
##
##    - input:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_input
##
##    - audio:
##        variants:
##            - pc:
##                only spice.no_usb_redir.default_ipv.pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##                only rv.rv_audio
##            - no_pc:
##                only spice.no_usb_redir.default_ipv.no_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##                only rv.rv_audio
##
##    - video_playback:
##        only spice.no_usb_redir.default_ipv.no_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_video
##
##    - usb_redirection:
##        only spice.usb_redir.default_ipv.pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_usb_redirection
##
##    - rv_gui_base:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.password.dcp_off.1monitor.default_sc
##        only rv.rv_gui
##
##    - rv_gui_fullscreen:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.password.dcp_off.1monitor.default_sc
##        only rv.rv_gui
##
##    - shutdown:
##        only spice.no_usb_redir.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
##        only rv.rv_vmshutdown


#actual tests

#variants:

#    - vanilla:

###    - build_install_qxl:
###        build_install_pkg = xf86-video-qxl
###        vm_name = guest
###        dst_dir = /tmp
###        libpciaccess_devel_url = path_to_libpciaccess_rpm
###        xorg_x11_server_devel_url = path_to_xorgx11server_rpm
###        xorg_x11_util_macros_url = path_to_xorgx11utilmacros_rpm
###        only build_install
###
###    - build_install_vdagent:
###        build_install_pkg = spice-vd-agent
###        vm_name = guest
###        dst_dir = /tmp
###        libpciaccess_devel_url = path_to_libpciaccess_rpm
###        only build_install
###
###    - build_install_spicegtk:
###        build_install_pkg = spice-gtk
###        vm_name = client
###        dst_dir = /tmp
###        celt051_devel_url = path_to_libpciaccess_rpm
###        libogg_devel_url = path_to_libogg_rpm
###        libcacard_devel_url = path_to_libcacard_rpm
###        only build_install
###
###    - rv_vm_setup:
###        only test_setup
###
###    - rv_guest_tools_setup:
###        setup_type = guest_tools
###        only test_setup
###
###    - negative_qemu_spice_launch_badport:
###        only spice.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.bad_port.no_password.dcp_off.1monitor.default_sc
###        only connect_negative
###
###    - negative_qemu_spice_launch_badic:
###        only spice.default_ipv.default_pc.default_sv.default_zlib_wc.default_jpeg_wc.bad_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
###        only connect_negative
###
###    - negative_qemu_spice_launch_badjpegwc:
###        only spice.default_ipv.default_pc.default_sv.default_zlib_wc.bad_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
###        only connect_negative
###
###    - negative_qemu_spice_launch_badzlib:
###        only spice.default_ipv.default_pc.default_sv.bad_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
###        only connect_negative
###
###    - negative_qemu_spice_launch_badsv:
###        only spice.default_ipv.default_pc.bad_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
###        only connect_negative
###
###    - negative_qemu_spice_launch_badpc:
###        only spice.default_ipv.bad_pc.default_sv.default_zlib_wc.default_jpeg_wc.default_ic.no_ssl.no_password.dcp_off.1monitor.default_sc
###        only connect_negative
###
###    #The following ipv6 test is not a true test of ipv6, it is converting an
###    #ipv4 address to ipv6, and verify the ipv6 format can be accepted.  The pure
###    #ipv6 address cannot be tested because the network is not setup to support ipv6
###    - connect_ipv6:
###        listening_addr = ipv6
###        only connect_quick
###
###    - qemu_report_ipv6:
###        listening_addr = ipv6
###        spice_info = ipv6
###        only connect_quick
###
###    - connect_menu:
###        rv_menu=yes
###        only connect_quick
###
###    - connect_ssl_explicit_hs:
###        ssltype = "explicit_hs"
###        only connect_ssl
###
###    - connect_ssl_implicit_hs:
###        ssltype = "implicit_hs"
###        spice_client_host_subject = no
###        only connect_ssl
###
###    - invalid_ssl_explicit_hs:
###        must_fail = yes
###        ssltype = "invalid_explicit_hs"
###        only connect_ssl
###
###    - invalid_ssl_implicit_hs:
###        must_fail = yes
###        ssltype = "invalid_implicit_hs"
###        spice_client_host_subject = no
###        only connect_ssl
###
###    - wrong_password:
###        must_fail = yes
###        spice_password_send = incorrectpass
###        only connect_password
###
###    - qemu_password:
###        qemu_password = qemupassword
###        only connect_quick
###
###    - overwrite_qemu_password:
###        qemu_password = qemupassword
###        only connect_password
###
###    - guest_shutdown_qemu:
###        shutdownfrom = qemu_monitor
###        only shutdown.spice
###
###    - negative_fullscreen:
###        full_screen = no
###        only fullscreen.spice
###    - start_vdagent_test:
###        vdagent_test = start
###        only vdagent
###
###    - stop_vdagent_test:
###        vdagent_test = stop
###        only vdagent.spice
###
###    - restart_start_vdagent_test:
###        vdagent_test = restart_start
###        only vdagent.spice
###
###    - restart_stop_vdagent_test:
###        vdagent_test = restart_stop
###        only vdagent.spice
###
###    - copy_client_to_guest_pos:
###        config_test = "positive_client_to_guest"
###        only copyandpaste.no_dcp
###
###    - copy_guest_to_client_pos:
###        config_test = "positive_guest_to_client"
###        only copyandpaste.no_dcp
###
###    - copy_client_to_guest_neg:
###        config_test = "negative_client_to_guest"
###        only copyandpaste.no_dcp
###
###    - copy_guest_to_client_neg:
###        config_test = "negative_guest_to_client"
###        only copyandpaste.no_dcp
###
###    - copy_guest_to_client_dcp_neg:
###        config_test = "negative_guest_to_client"
###        only copyandpaste.dcp
###
###    - copy_client_to_guest_dcp_neg:
###        config_test = "negative_client_to_guest"
###        only copyandpaste.dcp
###
###    - copyimg_client_to_guest_pos:
###        config_test = "positive_client_to_guest_image"
###        only copyandpaste.no_dcp
###
###    - copyimg_guest_to_client_pos:
###        config_test = "positive_guest_to_client_image"
###        only copyandpaste.no_dcp
###
###    - copyimg_client_to_guest_neg:
###        config_test = "negative_client_to_guest_image"
###        only copyandpaste.no_dcp
###
###    - copyimg_guest_to_client_neg:
###        config_test = "negative_guest_to_client_image"
###        only copyandpaste.no_dcp
###
###    - copyimg_client_to_guest_dcp_neg:
###        config_test = "negative_client_to_guest_image"
###        only copyandpaste.dcp
###
###    - copyimg_guest_to_client_dcp_neg:
###        config_test = "negative_guest_to_client_image"
###        only copyandpaste.dcp
###
###    - copy_client_to_guest_largetext_pos:
###        config_test = "positive_client_to_guest"
###        #Currently only testing 256KB, this is due to a bug on pygtk
###        #When the bug gets resolved the amount should be increased
###        text_to_test=262144
###        only copyandpaste.no_dcp
###
###    - copy_guest_to_client_largetext_pos:
###        config_test = "positive_guest_to_client"
###        # Currently only testing 256KB, this is due to a bug on pygtk
###        # When the bug gets resolved the amount should be increased
###        text_to_test=262144
###        only copyandpaste.no_dcp
###
###    - copy_client_to_guest_largetext_10mb_pos:
###        # This 10MB test will fail on RHEL6devel because of a pygtk bug
###        config_test = "positive_client_to_guest"
###        text_to_test=10485760
###        only copyandpaste.no_dcp
###
###    - copy_guest_to_client_largetext_10mb_pos:
###        # This 10MB test will fail on RHEL6devel because of a pygtk bug
###        config_test = "positive_guest_to_client"
###        text_to_test=10485760
###        only copyandpaste.no_dcp
###
###    - copybmpimg_client_to_guest_pos:
###        image_type = bmp
###        config_test = "positive_client_to_guest_image"
###        only copyandpaste.no_dcp
###
###    - copybmpimg_guest_to_client_pos:
###        image_type = bmp
###        config_test = "positive_guest_to_client_image"
###        only copyandpaste.no_dcp
###
###    - copyimg_medium_client_to_guest_pos:
###        image_tocopy_name = Image.png
###        final_image = MediumPNGTest.png
###        config_test = "positive_client_to_guest_image"
###        only copyandpaste.no_dcp
###
###    - copyimg_medium_guest_to_client_pos:
###        image_tocopy_name = Image.png
###        final_image = MediumPNGTest.png
###        config_test = "positive_guest_to_client_image"
###        only copyandpaste.no_dcp
###
###    - copyimg_large_client_to_guest_pos:
###        image_tocopy_name = Image-large.png
###        final_image = LargePNGTest.png
###        config_test = "positive_client_to_guest_image"
###        only copyandpaste.no_dcp
###
###    - copyimg_large_guest_to_client_pos:
###        image_tocopy_name = Image-large.png
###        final_image = LargePNGTest.png
###        config_test = "positive_guest_to_client_image"
###        only copyandpaste.no_dcp
###
###    - restart_vdagent_copy_client_to_guest_pos:
###        config_test = "positive_restart_client_to_guest"
###        only copyandpaste.no_dcp
###
###    - restart_vdagent_copy_guest_to_client_pos:
###        config_test = "positive_restart_guest_to_client"
###        only copyandpaste.no_dcp
###
###    - restart_vdagent_copyimg_client_to_guest_pos:
###        config_test = "positive_restart_client_to_guest_image"
###        only copyandpaste.no_dcp
###
###    - restart_vdagent_copyimg_guest_to_client_pos:
###        config_test = "positive_restart_guest_to_client_image"
###        only copyandpaste.no_dcp
###
###    - restart_vdagent_copybmpimg_client_to_guest_pos:
###        image_type = bmp
###        config_test = "positive_restart_client_to_guest_image"
###        only copyandpaste.no_dcp
###
###    - restart_vdagent_copybmpimg_guest_to_client_pos:
###        image_type = bmp
###        config_test = "positive_restart_guest_to_client_image"
###        only copyandpaste.no_dcp
###
###    - restart_vdagent_copy_client_to_guest_largetext_pos:
###        config_test = "positive_restart_client_to_guest"
###        #Currently only testing 256KB, this is due to a bug on pygtk
###        #When the bug gets resolved the amount should be increased
###        #test_to_test=262144
###        only copyandpaste.no_dcp
###
###    - restart_vdagent_copy_guest_to_client_largetext_pos:
###        config_test = "positive_restart_guest_to_client"
###        #Currently only testing 256KB, this is due to a bug on pygtk
###        #When the bug gets resolved the amount should be increased
###        text_to_test=262144
###        only copyandpaste.no_dcp
###
###    - keyboard_input_leds_and_esc_keys:
###        full_screen = yes
###        config_test = "leds_and_esc_keys"
###        only input.spice
###
###    - keyboard_input_non-us_layout:
###        full_screen = yes
###        config_test = "nonus_layout"
###        only input.spice
###
###    - keyboard_input_type_and_func_keys:
###        full_screen = yes
###        config_test = "type_and_func_keys"
###        only input.spice
###
###    - keyboard_input_leds_migration:
###        full_screen = yes
###        config_test = "leds_migration"
###        only input.spice
###
###    - rv_audio_setup:
###        setup_type = audio
###        only test_setup
###        only rv.rv_setup
###
###    - audio_compression:
###        only audio.pc.spice
###
###    - audio_no_compression:
###        only audio.no_pc.spice
###
###    - disable_audio:
###        disable_audio = "yes"
###        only audio.pc.spice
###
###    - migrate_audio:
###        config_test = migration
###        rv_audio_treshold = 529200
###        only audio.pc.spice
###
###    - smartcard_certinfo:
###        smartcard_testtype = "pkcs11_listcerts"
###        gencerts = "cert1,cert2,cert3"
###        certdb = "/etc/pki/nssdb/"
###        self_sign = True
###        trustargs = "CT,CT,CT"
###        only smartcard.spice
###
###    - smartcard_certdetail:
###        smartcard_testtype = "pklogin_finder"
###        gencerts = "cert1,cert2,cert3"
###        certdb = "/etc/pki/nssdb/"
###        self_sign = True
###        trustargs = "CT,CT,CT"
###        certcheckstr = "Found '3' certificate(s)"
###        certcheckstr2 = "verifing the certificate #"
###        certcheck3 = "Couldn't verify Cert: Issuer certificate is invalid."
###        certcheck4 = "verify_certificate() failed:"
###        only smartcard.spice
###
###    - qxl_logging:
###        only logging.spice
###
###    - spice_vdagent_logging:
###        logtest = spice-vdagent
###        only logging.spice
###
###    - proxy:
###        spice_proxy = http://10.34.73.1:3128
###        only connect_quick
###
###    - rv_from_file_basic:
###        rv_parameters_from = file
###        only connect_quick
###
###    - rv_from_file_proxy:
###        spice_proxy = http://10.34.73.1
###        rv_parameters_from = file
###        only connect_quick
###
###    - rv_from_file_ssl:
###        rv_parameters_from = file
###        only connect_ssl
###
###    - proxy_migrate:
###        spice_proxy = http://10.34.73.1:3128
###        only migrate.no_ssl
###
###    - rv_from_file_password:
###        rv_parameters_from = file
###        only connect_password
###
###    - rv_from_file_fullscreen:
###        full_screen = yes
###        rv_parameters_from = file
###        only fullscreen
###
###    #Before running any of the rv_gui tests, rv_setup must be run
###    - rv_gui_setup:
###        setup_type = gui
###        only test_setup
###
###    - rv_gui_zoomout:
###        rv_gui_test_list = zoomout
###        only rv_gui_base
###
###    - rv_gui_zoomout_shortcut:
###        rv_gui_test_list = zoomout_shortcut
###        only rv_gui_base
###
###    - rv_gui_zoomout_accesskeys:
###        rv_gui_test_list = zoomout_accesskeys
###        only rv_gui_base
###
###    - rv_gui_zoomin:
###        rv_gui_test_list = zoomin
###        only rv_gui_base
###
###    - rv_gui_zoomin_shortcut:
###        rv_gui_test_list = zoomin_shortcut
###        only rv_gui_base
###
###    - rv_gui_zoomin_accesskeys:
###        rv_gui_test_list = zoomin_accesskeys
###        only rv_gui_base
###
###    - rv_gui_help_about:
###        rv_gui_test_list = help
###        only rv_gui_base
###
###    - rv_gui_help_about_accesskeys:
###        rv_gui_test_list = help_accesskeys
###        only rv_gui_base
###
###    - rv_gui_help_about_license:
###        rv_gui_test_list = help_license
###        only rv_gui_base
###
###    - rv_gui_help_about_license_accesskeys:
###        rv_gui_test_list = help_license_accesskeys
###        only rv_gui_base
###
###    - rv_gui_help_about_credits:
###        rv_gui_test_list = help_credits
###        only rv_gui_base
###
###    - rv_gui_dummy:
###        rv_gui_test_list = dummy
###        only rv_gui_base
###
###    - rv_gui_help_about_credits_accesskeys:
###        rv_gui_test_list = help_credits_accesskeys
###        only rv_gui_base
###
###    - rv_gui_quit_menu:
###        rv_gui_test_list = quit_menu
###        only rv_gui_base
###
###    - rv_gui_quit_shortcut:
###        rv_gui_test_list = quit_shortcut
###        only rv_gui_base
###
###    - rv_gui_quit_accesskeys:
###        rv_gui_test_list = quit_accesskeys
###        only rv_gui_base
###
###    - rv_gui_close_display:
###        rv_gui_test_list = close
###        only rv_gui_base
###
###    - rv_gui_close_shortcut:
###        rv_gui_test_list = close_shortcut
###        only rv_gui_base
###
###    - rv_gui_zoomnorm:
###        rv_gui_test_list = zoomin zoomin zoomnorm
###        only rv_gui_base
###
###    - rv_gui_zoomnorm_shortcut:
###        rv_gui_test_list = zoomin zoomin zoomnorm_shortcut
###        only rv_gui_base
###
###    - rv_gui_zoomnorm2:
###        rv_gui_test_list = zoomout zoomout zoomout zoomnorm
###        only rv_gui_base
###
###    - rv_gui_zoomnorm2_shortcut:
###        rv_gui_test_list = zoomout zoomout zoomout zoomnorm_shortcut
###        only rv_gui_base
###
###    - rv_gui_zoomnorm_accesskeys:
###        rv_gui_test_list = zoomin_accesskeys zoomin_accesskeys zoomnorm_accesskeys
###        only rv_gui_base
###
###    - rv_gui_screenshot_default:
###        rv_gui_test_list = screenshot
###        screenshot_expected_name = "Screenshot.png"
###        only rv_gui_base
###
###    - rv_gui_screenshot_png:
###        rv_gui_test_list = screenshot_cname_png
###        screenshot_expected_name = "custom_name.png"
###        only rv_gui_base
###
###    - rv_gui_screenshot_bmp:
###        rv_gui_test_list = screenshot_cname_bmp
###        screenshot_expected_name = "custom_name.bmp"
###        only rv_gui_base
###
###    - rv_gui_screenshot_tiff:
###        rv_gui_test_list = screenshot_cname_tiff
###        screenshot_expected_name = "custom_name.tiff"
###        only rv_gui_base
###
###    - rv_gui_screenshot_invalid_text:
###        rv_gui_test_list = screenshot_cname_invalidtext
###        screenshot_expected_name = "custom_name.abcd.png"
###        only rv_gui_base
###
###   - rv_gui_fullscreen_menu:
###        rv_gui_test_list = fullscreen
###        only rv_gui_fullscreen
###
###    - rv_gui_fullscreen_shortcut:
###        rv_gui_test_list = fullscreen_shortcut
###        only rv_gui_fullscreen
###
###    - rv_gui_fullscreen_switch_out_menu:
###        full_screen = yes
###        rv_gui_test_list = leave_fullscreen fullscreen
###        only rv_gui_fullscreen
###
###    - rv_gui_fullscreen_switch_out_shortcut:
###        full_screen = yes
###        rv_gui_test_list = leave_fullscreen_shortcut fullscreen_shortcut
###        only rv_gui_fullscreen
###
###    - rv_gui_windowed_switch_out_menu:
###        rv_gui_test_list = fullscreen leave_fullscreen
###        only rv_gui_fullscreen
###
###    - rv_gui_windowed_switch_out_shortcut:
###        rv_gui_test_list = fullscreen_shortcut leave_fullscreen_shortcut
###        only rv_gui_fullscreen
###
###    - rv_gui_connect:
###        rv_gui_test_list = connect
###        only rv_gui_base
###
###    - rv_gui_printscreen:
###        rv_gui_test_list = printscreen
###        only rv_gui_base
###
###    - rv_gui_printscreen_accesskeys:
###        rv_gui_test_list = printscreen_accesskeys
###        only rv_gui_base
###
###    #autoresize on/off option has been removed
###    #- rv_gui_windowresize_autoresize_on:
###    #    changex = 700
###    #    changey = 500
###    #    accept_pct = 5
###    #    rv_gui_test_list = zoomnorm autoresize_on
###    #    only rv_gui_base
###    #- rv_gui_windowresize_autoresize_off:
###    #    changex = 800
###    #    changey = 600
###    #    accept_pct = 5
###    #    rv_gui_test_list = zoomnorm autoresize_off
###    #    only rv_gui_base
###
###    - rv_gui_ctrl_alt_del:
###        rv_gui_test_list = ctrl_alt_del
###        only rv_gui_base
###
###    - rv_gui_ctrl_alt_del_accesskeys:
###        rv_gui_test_list = ctrl_alt_del_accesskeys
###        only rv_gui_base
###
###    - rv_usb_copy:
###        only usb_redirection
###
###    - rv_usb_copy_migration:
###        usb_migrate = yes
###        iterations = 1
###        only usb_redirection
###
###    - rv_video_test:
###        only video_playback

#variants:
#    - @build_install_tests:
#        only build_install_qxl, build_install_vdagent, build_install_spicegtk
#
#    - @install_setup:
#        only install_client, rv_vm_setup, rv_audio_setup
#
#    #if single test need to be launched and this test does not belong to no group
#    #- @all_spice_tests:
#    #    no build_install_qxl, build_install_vdagent, build_install_spicegtk
#    #    no vanilla.plain, install_client, rv_audio_setup
#
#    - @client_tests:
#        only negative_qemu_spice_launch_badport, negative_qemu_spice_launch_badic, negative_qemu_spice_launch_badjpegwc, negative_qemu_spice_launch_badzlib, negative_qemu_spice_launch_badsv, negative_qemu_spice_launch_badpc, connect_ssl, connect_quick, connect_ipv6, qemu_report_ipv6, connect_password, connect_menu, wrong_password, qemu_password, overwrite_qemu_password, vanilla.shutdown, guest_shutdown_qemu, vanilla.fullscreen, negative_fullscreen, vanilla.disconnect, connect_ssl_explicit_hs, connect_ssl_implicit_hs, invalid_ssl_explicit_hs, invalid_ssl_implicit_hs, migrate.no_ssl, migrate.ssl, migrate.ssl_reboot, migrate.ssl_video, keyboard_input_leds_and_esc_keys, keyboard_input_non-us_layout, keyboard_input_type_and_func_keys, keyboard_input_leds_migration, audio_compression, audio_no_compression, disable_audio, migrate_audio, smartcard_certinfo, smartcard_certdetail, qxl_logging, spice_vdagent_logging, proxy.connect_quick, rv_from_file_basic, rv_from_file_proxy, rv_from_file_ssl, proxy_migrate, rv_from_file_password, rv_from_file_fullscreen
#
#    - @vdagent_tests:
#        only rv_guest_tools_setup, start_vdagent_test, stop_vdagent_test, restart_start_vdagent_test, restart_stop_vdagent_test, restart_vdagent_copy_client_to_guest_pos, restart_vdagent_copy_guest_to_client_pos, restart_vdagent_copyimg_client_to_guest_pos, restart_vdagent_copyimg_guest_to_client_pos, restart_vdagent_copybmpimg_client_to_guest_pos, restart_vdagent_copybmpimg_guest_to_client_pos, restart_vdagent_copy_client_to_guest_largetext_pos, restart_vdagent_copy_guest_to_client_largetext_pos
#
#    - @vdagent_tests_migrate:
#        only migrate.ssl_vdagent
#
#    - @copypaste_tests:
#        only copy_client_to_guest_largetext_pos, copy_guest_to_client_largetext_pos, copy_client_to_guest_pos, copy_guest_to_client_pos, copy_guest_to_client_neg, copy_client_to_guest_neg, copyimg_client_to_guest_pos, copyimg_client_to_guest_neg, copyimg_guest_to_client_pos, copyimg_guest_to_client_neg, copyimg_client_to_guest_dcp_neg, copyimg_guest_to_client_dcp_neg, copy_guest_to_client_dcp_neg, copy_client_to_guest_dcp_neg, copybmpimg_client_to_guest_pos, copybmpimg_guest_to_client_pos, copy_guest_to_client_largetext_10mb_pos, copy_client_to_guest_largetext_10mb_pos, copyimg_medium_client_to_guest_pos, copyimg_medium_guest_to_client_pos, copyimg_large_client_to_guest_pos, copyimg_large_guest_to_client_pos
#
#    - @gui_tests:
#        only rv_gui_setup, rv_gui_connect, rv_gui_quit_shortcut, rv_gui_quit_accesskeys, rv_gui_screenshot_default, rv_gui_screenshot_png, rv_gui_screenshot_bmp, rv_gui_screenshot_tiff, rv_gui_screenshot_invalid_text, rv_gui_zoomout, rv_gui_zoomout_shortcut, rv_gui_zoomout_accesskeys, rv_gui_zoomin, rv_gui_zoomin_shortcut, rv_gui_zoomin_accesskeys, rv_gui_zoomnorm, rv_gui_zoomnorm_shortcut, rv_gui_zoomnorm_accesskeys, rv_gui_help_about, rv_gui_help_about_license, rv_gui_help_about_credits, rv_gui_fullscreen_menu, rv_gui_fullscreen_shortcut, rv_gui_zoomnorm2, rv_gui_zoomnorm2_shortcut, rv_gui_windowed_switch_out_menu, rv_gui_windowed_switch_out_shortcut, rv_gui_fullscreen_switch_out_menu, rv_gui_fullscreen_switch_out_shortcut, rv_gui_ctrl_alt_del, rv_gui_ctrl_alt_del_accesskeys, rv_gui_printscreen, rv_gui_printscreen_accesskeys, rv_gui_close_display, rv_gui_close_shortcut, rv_gui_help_about_accesskeys, rv_gui_help_about_license_accesskeys, rv_gui_help_about_credits_accesskeys
#
#    - usb_tests:
#        only rv_usb_copy, rv_usb_copy_migration
#
#    - @odd:
#        only rv_gui_dummy

